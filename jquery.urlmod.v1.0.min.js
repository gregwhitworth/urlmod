/** Author: Greg Whitworth */
/** URL: https://github.com/gregwhitworth/urlmod */
/** Version: 1.0 */
/** MIT License */
(function($){$.urlmod=function(options){var settings=$.extend({},$.urlmod.defaults,options);if(settings.url!=(null||"")){var url=settings.url;var updates=settings.updates;var urlStart=url.substring(0,url.indexOf("?")+1);var paramString=url.substring(url.indexOf("?")+1);var paramsArr=[];var initparams=paramString.split("&");var finalparams=[];$.each(initparams,function(i,param){var keyVal=param.split("=");var key=keyVal[0];var val=keyVal[1];paramsArr[key]=val});var keys=Object.keys(paramsArr);if(settings.removeStaleParams){$.each(keys,function(i,key){if(eval("updates."+key)==undefined){delete paramsArr[key]}})}$.each(updates,function(key,update){if($.isArray(update)){update=update.join(",")}paramsArr[key]=update});keys=Object.keys(paramsArr);$.each(keys,function(i,key){finalparams.push(key+"="+paramsArr[key])});return urlStart+finalparams.join("&")}return};$.urlmod.defaults={url:null,updates:{},removeStaleParams:false}})(jQuery);